!function(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-icon lucide-check"><path d="M20 6 9 17l-5-5"/></svg>',t='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>',n=window.CE_DEFAULT_OPTIONS||{};console.log("Content Editable Popover initialized with options:",n);const o={sanitize:!1,placeholder:"Type something",onOpen:null,onClose:null,onSave:null,onCancel:null,showFlashOnSave:!0,flashElementColor:"#fde68a",closeOnBlur:!0,...n};window.contentEditable=function(n=".editable",l={}){const c=!!l.sanitize??o.sanitize,r=l.placeholder||o.placeholder,i=l.onOpen||o.onOpen,s=l.onClose||o.onClose,a=l.onSave||o.onSave,d=l.onCancel||o.onCancel,u=l.closeOnBlur??o.closeOnBlur,p=l.showFlashOnSave??o.showFlashOnSave,v=l.flashElementColor||o.flashElementColor,g=Math.random().toString(36).substring(2,9);let h=null;function w(e=null){if(!h)return;const{pop:t}=h;let n=h.targetEl;t._cleanup&&t._cleanup(),t.remove(),h=null,s&&"function"==typeof s&&s(n),"close"===e&&d&&"function"==typeof d&&d(n)}function m(e,t,n,o){const l=e.value;if(""!==l.trim()){if(n){const e=l.replace(/<[^>]+>/g,"");t.innerText=e}else t.innerText=l;p&&function(e){const t=e.style.transition;e.style.transition="background-color 0.25s ease";const n=e.style.backgroundColor;e.style.backgroundColor=v,setTimeout(()=>{e.style.backgroundColor=n||"",setTimeout(()=>{e.style.transition=t||""},300)},250)}(t),w(),a&&"function"==typeof a&&a(t,l)}else h&&h.pop&&e.classList.add("error")}function f(e,t){const n=e.getBoundingClientRect(),o=t.getBoundingClientRect();let l=window.scrollY+n.bottom+8,c=window.scrollX+n.left;c+=(n.width-o.width)/2;const r=document.documentElement.clientWidth;c<8&&(c=8),c+o.width>r-8&&(c=r-o.width-8),t.classList.remove("ce-popover-above");const i=document.documentElement.clientHeight;n.bottom+o.height+8>i&&n.top-o.height-8>0&&(l=window.scrollY+n.top-o.height-8,t.classList.add("ce-popover-above")),t.style.left=c+"px",t.style.top=l+"px",t.style.transform="translateY(0)"}return document.querySelectorAll(n).forEach(e=>{e.classList.add("ce-editable"),e.setAttribute("data-ce-editable",g)}),document.addEventListener("click",o=>{const l=o.target.closest(n);if(l)return o.preventDefault(),void function(n){if(h&&h.targetEl===n)return;w(),i&&"function"==typeof i&&i(n);const o=document.createElement("div");o.className="ce-popover",o.id=`ce-popover-${g}`,o.setAttribute("role","dialog"),o.setAttribute("aria-label","Edit content");const l="true"===n.dataset.multiline,s=l?n.innerText:n.innerText.replace(/\s+/g," ").trim(),a=document.createElement("div");a.className="ce-btn-wrapper",a.innerHTML=`\n            <button class="ce-btn check" title="Save" aria-label="Save (Enter)">${e}</button>\n            <button class="ce-btn close" title="Close" aria-label="Close">${t}</button>\n        `;const d=l?`<div class="row">\n                 <textarea id="ce-editcontrol-${g}" class="ce-editcontrol" placeholder="${r}" rows="3" aria-label="Edit content">${u=s,u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</textarea>\n          ${a.outerHTML}\n               </div>`:`<div class="row">\n                 <input  id="ce-editcontrol-${g}" class="ce-editcontrol" placeholder="${r}" type="text" aria-label="Edit content" value="${function(e){return(""+e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(s)}" />\n                ${a.outerHTML}\n               </div>`;var u;o.innerHTML=d,document.body.appendChild(o),f(n,o),h={pop:o,targetEl:n};const p=o.querySelector(l?"textarea":'input[type="text"]');p.focus(),function(e){if(e.setSelectionRange){const t=e.value.length;e.setSelectionRange(t,t)}else if(e.createTextRange){const t=e.createTextRange();t.collapse(!1),t.select()}}(p);const v=o.querySelector(".ce-btn.check");o.querySelector(".ce-btn.close").addEventListener("click",e=>{e.stopPropagation(),w("close")}),v.addEventListener("click",e=>{e.stopPropagation(),m(p,n,c,l)}),p.addEventListener("input",e=>{""!==p.value.trim()&&p.classList.remove("error")}),l?p.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),m(p,n,c,!0))}):p.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),m(p,n,c,!1))});const E=()=>f(n,o);window.addEventListener("resize",E),window.addEventListener("scroll",E,!0),o._cleanup=()=>{window.removeEventListener("resize",E),window.removeEventListener("scroll",E,!0)}}(l);u&&h&&!o.target.closest(".ce-popover")&&w()}),document.addEventListener("keydown",e=>{h&&"Escape"===e.key&&(e.preventDefault(),w())}),{destroy:()=>{document.querySelectorAll(n).forEach(e=>{})}}}}();